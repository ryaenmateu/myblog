/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x368d=['change:activeView','customView','detachFromDom','items','narrowSidebar','northArrowSouthWest','Annotations','destroy','annotationType','includes','register','pluginName','southArrowNorth','getAnnotationView','high','change:selectedViews','from','attach','plugins','create','listenTo','NarrowSidebar','attachToDom','Sidebar','bind','target','focus','bindTo','isVisible','type','narrowsidebar-attach-already-attached:\x20Cannot\x20attach\x20narrow\x20sidebar\x20twice.','element','keyCode','northArrowSouth','change:container','keydown','locale','first','detach','southArrowNorthWest','stopListening','set:container','balloonPanelView','has','clear','southArrowNorthEast','add','delete','preventDefault','getSidebarItemView','get','list','ck-sidebar--narrow','esc','narrowsidebar-detach-not-attached:\x20Cannot\x20detach\x20not\x20attached\x20sidebar.','values','number','pin','activeView','contains','init','Esc','bodyCollection','isAnimationDisabled','content','off','defaultPositions','_annotationViewToNarrowView','context','isAttached','isDirty','view','remove'];(function(_0x1f50ac,_0x368d52){const _0x990fcf=function(_0x56b705){while(--_0x56b705){_0x1f50ac['push'](_0x1f50ac['shift']());}};_0x990fcf(++_0x368d52);}(_0x368d,0xe7));const _0x990f=function(_0x1f50ac,_0x368d52){_0x1f50ac=_0x1f50ac-0x0;let _0x990fcf=_0x368d[_0x1f50ac];return _0x990fcf;};import _0x3366e5 from'@ckeditor/ckeditor5-core/src/contextplugin';import _0x4687b7 from'./annotations';import _0x4a7094 from'./sidebar';import _0x5581ef from'./view/annotationcounterbuttonview';import _0x1c1d38 from'@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview';import _0x5bf9c2 from'@ckeditor/ckeditor5-ui/src/editorui/bodycollection';import _0x18319e from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import _0x1a32c5 from'@ckeditor/ckeditor5-utils/src/dom/emittermixin';import{keyCodes as _0x18d96b}from'@ckeditor/ckeditor5-utils/src/keyboard';import'../../theme/sidebar-narrow.css';export default class S extends _0x3366e5{static get['requires'](){return[_0x4a7094,_0x4687b7];}static get[_0x990f('0x48')](){return _0x990f('0x9');}constructor(_0x49ef5a){super(_0x49ef5a),this[_0x990f('0x39')]=!0x1,this['v']=new Set(),this['S']=Object[_0x990f('0x7')](_0x1a32c5),this[_0x990f('0x37')]=new Map();}[_0x990f('0x30')](){this[_0x990f('0x38')]['plugins'][_0x990f('0x26')](_0x990f('0x43'))[_0x990f('0x47')](_0x990f('0x41'),this),this[_0x990f('0x32')]=new _0x5bf9c2(this[_0x990f('0x38')]['locale']),this[_0x990f('0x32')][_0x990f('0xa')](),this[_0x990f('0x1e')]=new _0x1c1d38(this[_0x990f('0x38')][_0x990f('0x18')]),this[_0x990f('0x32')][_0x990f('0x22')](this[_0x990f('0x1e')]);}[_0x990f('0x5')](){const _0x38dee6=this['context']['plugins'][_0x990f('0x26')](_0x990f('0xb')),_0x40b63b=this['context'][_0x990f('0x6')]['get']('Annotations'),_0x380309=this[_0x990f('0x1e')];if(this[_0x990f('0x39')])throw new _0x18319e(_0x990f('0x12'),this);this['isAttached']=!0x0,this[_0x990f('0x8')](_0x38dee6,_0x990f('0x1d'),()=>{this[_0x990f('0x1a')](),this[_0x990f('0x8')](_0x38dee6,_0x990f('0x16'),_0x5479d8=>{_0x5479d8[_0x990f('0x35')](),this['attach']();});}),_0x38dee6['_attachToContainer']({'viewClass':_0x990f('0x28'),'spaceBetweenItems':0x5}),_0x38dee6[_0x990f('0x3b')][_0x990f('0x27')][_0x990f('0xf')](_0x40b63b[_0x990f('0x40')])['using'](_0x46c0af=>{const _0x23d0de=new _0x5581ef(this[_0x990f('0x38')][_0x990f('0x18')]),_0x258e91=_0x38dee6['addView'](_0x46c0af,_0x23d0de);return this[_0x990f('0x37')]['set'](_0x46c0af,_0x23d0de),_0x23d0de[_0x990f('0xc')]('isDirty',_0x990f('0x45'),_0x990f('0x2c'))['to'](_0x46c0af,_0x990f('0x3a'),_0x990f('0x11'),'length'),_0x23d0de['on']('execute',()=>{this['v']['clear'](),_0x380309[_0x990f('0x34')][_0x990f('0x19')]!==_0x46c0af?(this['_'](_0x46c0af),_0x46c0af[_0x990f('0x13')][_0x990f('0xe')](),_0x40b63b[_0x990f('0x2e')]=_0x46c0af[_0x990f('0x3e')]):this['B']();}),_0x258e91;}),this[_0x990f('0x8')](_0x40b63b[_0x990f('0x40')],_0x990f('0x3c'),(_0x14e54f,_0x3fd50a)=>{this[_0x990f('0x37')][_0x990f('0x26')](_0x3fd50a)['destroy'](),this['_annotationViewToNarrowView'][_0x990f('0x23')](_0x3fd50a);}),this[_0x990f('0x8')](_0x40b63b,_0x990f('0x3d'),(_0x55a47d,_0x2314b7,_0x1db5c3,_0x2c0c1f)=>{if(_0x2c0c1f){const _0x27d22d=_0x40b63b['getAnnotationView'](_0x2c0c1f);if(!_0x27d22d)return;_0x38dee6[_0x990f('0x25')](_0x27d22d)[_0x990f('0x33')]=!0x1;}if(_0x1db5c3){const _0x374313=_0x40b63b[_0x990f('0x1')](_0x1db5c3);_0x38dee6[_0x990f('0x25')](_0x374313)['isAnimationDisabled']=!0x0;}},{'priority':_0x990f('0x2')}),this['listenTo'](_0x40b63b,_0x990f('0x3d'),(_0x5ecd85,_0x590ec9,_0x25036b)=>{const _0x75b2dd=_0x40b63b[_0x990f('0x1')](_0x25036b),_0x175fa9=_0x38dee6[_0x990f('0x25')](_0x75b2dd);_0x25036b&&_0x175fa9?this['_'](_0x75b2dd):this['B']();}),this[_0x990f('0x8')](_0x40b63b,_0x990f('0x3'),(_0x33444e,_0x204e8b,_0x22d39f,_0x3f8ade)=>{for(const _0x4cdcda of _0x3f8ade)_0x22d39f[_0x990f('0x46')](_0x4cdcda)||this['v'][_0x990f('0x23')](_0x40b63b['getAnnotationView'](_0x4cdcda));}),this[_0x990f('0x8')](_0x40b63b,'refresh',()=>{_0x380309[_0x990f('0x10')]&&this['D']();}),this['S']['listenTo'](document,_0x990f('0x17'),(_0x3e7f74,_0x34a355)=>{_0x34a355[_0x990f('0x14')]===_0x18d96b[_0x990f('0x29')]&&_0x380309[_0x990f('0x10')]&&(this['v'][_0x990f('0x22')](_0x380309['content'][_0x990f('0x19')]),this['B'](),_0x34a355['stopPropagation'](),_0x34a355[_0x990f('0x24')]());}),this['S'][_0x990f('0x8')](document,'mousedown',(_0xc72522,_0x2c8281)=>{const _0x8e44c4=_0x2c8281[_0x990f('0xd')];_0x380309[_0x990f('0x10')]&&_0x380309[_0x990f('0x13')][_0x990f('0x2f')](_0x8e44c4)||_0x38dee6['view'][_0x990f('0x13')][_0x990f('0x2f')](_0x8e44c4)||(this['v'][_0x990f('0x20')](),this['B']());});}['detach'](){if(!this[_0x990f('0x39')])throw new _0x18319e(_0x990f('0x2a'),this);const _0x37655b=this['context']['plugins'][_0x990f('0x26')](_0x990f('0xb'));this['B'](),Array[_0x990f('0x4')](this[_0x990f('0x37')][_0x990f('0x2b')](),_0xf72b0f=>_0xf72b0f[_0x990f('0x44')]()),this[_0x990f('0x37')][_0x990f('0x20')](),_0x37655b['_detachFromContainer'](),this[_0x990f('0x1c')](),this['S']['stopListening'](),this[_0x990f('0x39')]=!0x1;}[_0x990f('0x44')](){this[_0x990f('0x39')]&&this[_0x990f('0x1a')](),this['bodyCollection'][_0x990f('0x3f')]();}['_'](_0xbbcc36){if(this['v'][_0x990f('0x1f')](_0xbbcc36))return;const _0x214c88=this[_0x990f('0x1e')][_0x990f('0x34')][_0x990f('0x19')];_0x214c88!==_0xbbcc36?(_0x214c88&&this['L'](_0x214c88),this['N'](_0xbbcc36),this['balloonPanelView'][_0x990f('0x34')][_0x990f('0x20')](),this[_0x990f('0x1e')]['content'][_0x990f('0x22')](_0xbbcc36),this['D']()):this['D']();}['D'](){const _0x545e0a=this[_0x990f('0x1e')][_0x990f('0x34')][_0x990f('0x19')];if(!this['_annotationViewToNarrowView'][_0x990f('0x1f')](_0x545e0a))return;const _0x4a7a21=this['_annotationViewToNarrowView'][_0x990f('0x26')](_0x545e0a)[_0x990f('0x13')],_0x24a828=function(){const _0x4a785d=_0x1c1d38[_0x990f('0x36')];return[_0x4a785d[_0x990f('0x21')],_0x4a785d['northArrowSouthEast'],_0x4a785d[_0x990f('0x0')],_0x4a785d[_0x990f('0x15')],_0x4a785d[_0x990f('0x1b')],_0x4a785d[_0x990f('0x42')]];}();this['balloonPanelView'][_0x990f('0x2d')]({'target':_0x4a7a21,'positions':_0x24a828});}['B'](){const _0x229943=this[_0x990f('0x1e')],_0x1c8be9=_0x229943[_0x990f('0x34')][_0x990f('0x19')];_0x1c8be9&&(this['L'](_0x1c8be9),_0x229943['unpin'](),_0x229943['content'][_0x990f('0x20')]());}['N'](_0x350455){this[_0x990f('0x8')](_0x350455,'change:height',()=>this['D']()),this[_0x990f('0x8')](_0x350455,_0x990f('0x31'),(_0x26100b,_0x33f51b)=>{this['v'][_0x990f('0x22')](_0x350455),this['B'](),_0x33f51b();});}['L'](_0xf7cfec){this['stopListening'](_0xf7cfec);}}