/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x11c2=['InlineAnnotations','Esc','customView','Annotations','showStack','uiType','attach','change:isFocused','includes','addObserver','update','afterInit','get','hasView','change:activeView','has','init','register','context','plugins','inlineannotations-not-allowed-with-context:\x20Cannot\x20switch\x20Annotations\x20UI\x20to\x20`InlineAnnotations`\x20when\x20using\x20`Context`.','items','pluginName','clear','editor','delete','detach','updatePosition','activeView','document','requires','getTarget','stopListening','destroy','listenTo','mousedown','visibleView','keystrokes','inlineannotations-detach-not-attached:\x20Cannot\x20detach\x20a\x20UI\x20if\x20it\x20is\x20not\x20attached.','view','change:visibleView','getAnnotationView','editing','change:selectedViews','switchTo','focus','targetRect','isAttached','remove','inline','isFocused','inlineannotations-attach-already-attached:\x20Cannot\x20attach\x20the\x20same\x20annotation\x20twice.','add','focusTracker'];(function(_0x1f86ec,_0x11c217){const _0x1fa3fb=function(_0x2cf7bb){while(--_0x2cf7bb){_0x1f86ec['push'](_0x1f86ec['shift']());}};_0x1fa3fb(++_0x11c217);}(_0x11c2,0xe8));const _0x1fa3=function(_0x1f86ec,_0x11c217){_0x1f86ec=_0x1f86ec-0x0;let _0x1fa3fb=_0x11c2[_0x1f86ec];return _0x1fa3fb;};import _0x54e94c from'@ckeditor/ckeditor5-core/src/plugin';import _0x57855b from'../annotations/annotations';import _0xf02dda from'./editorannotations';import _0x3bd953 from'@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon';import _0x4aee55 from'@ckeditor/ckeditor5-engine/src/view/observer/mouseobserver';import _0x417883 from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import'./../../theme/annotation-inline.css';export default class f extends _0x54e94c{static get[_0x1fa3('0xe')](){return[_0x57855b,_0xf02dda,_0x3bd953];}static get[_0x1fa3('0x6')](){return _0x1fa3('0x26');}constructor(_0x25580f){super(_0x25580f),_0x25580f[_0x1fa3('0x1a')][_0x1fa3('0x17')][_0x1fa3('0x2f')](_0x4aee55),this[_0x1fa3('0x1f')]=!0x1,this['v']=new Set(),this['A']=_0x25580f[_0x1fa3('0x3')][_0x1fa3('0x32')](_0x3bd953),this['I']=new Set();}[_0x1fa3('0x0')](){const _0x659492=this['editor'][_0x1fa3('0x3')][_0x1fa3('0x32')](_0x57855b);_0x659492[_0x1fa3('0x2')]===this[_0x1fa3('0x8')]&&(_0x659492[_0x1fa3('0x1')](_0x1fa3('0x21'),this),this[_0x1fa3('0x8')][_0x1fa3('0x15')]['set'](_0x1fa3('0x27'),(_0x1aab2f,_0x12305c)=>{const _0x4e228d=this['A'];this[_0x1fa3('0x1f')]&&_0x4e228d['visibleView']&&_0x659492[_0x1fa3('0x5')][_0x1fa3('0x35')](_0x4e228d[_0x1fa3('0x14')])&&(this['v'][_0x1fa3('0x24')](_0x4e228d['visibleView']),this['C'](_0x4e228d['visibleView']),_0x12305c());}));}[_0x1fa3('0x31')](){const _0x5daafe=this[_0x1fa3('0x8')][_0x1fa3('0x3')][_0x1fa3('0x32')](_0x57855b);_0x5daafe[_0x1fa3('0x2')]===this['editor']&&(_0x5daafe[_0x1fa3('0x2b')]||_0x5daafe[_0x1fa3('0x1c')](_0x1fa3('0x21')));}[_0x1fa3('0x11')](){this[_0x1fa3('0x1f')]&&this[_0x1fa3('0xa')]();}[_0x1fa3('0x2c')](){const _0x1a0a24=this[_0x1fa3('0x8')][_0x1fa3('0x3')][_0x1fa3('0x32')](_0x1fa3('0x29')),_0x116bdc=this['A'];if(this['isAttached'])throw new _0x417883(_0x1fa3('0x23'),this);if(_0x1a0a24['context']!==this[_0x1fa3('0x8')])throw new _0x417883(_0x1fa3('0x4'),this);this['listenTo'](this['editor']['ui']['focusTracker'],_0x1fa3('0x2d'),(_0x444327,_0x2208f9,_0x235307)=>{if(!_0x235307)for(const _0x2d91b7 of _0x1a0a24['items'])this['C'](_0x2d91b7);}),this['listenTo'](_0x1a0a24[_0x1fa3('0x5')],_0x1fa3('0x20'),(_0x9b5bac,_0x5588b1)=>{this['C'](_0x5588b1);}),this[_0x1fa3('0x12')](_0x1a0a24,_0x1fa3('0x1b'),(_0x38ff88,_0x482d6f,_0x130583,_0x181a6d)=>{for(const _0x5a1a27 of _0x181a6d)_0x130583[_0x1fa3('0x2e')](_0x5a1a27)||this['v'][_0x1fa3('0x9')](_0x1a0a24[_0x1fa3('0x19')](_0x5a1a27));for(const _0x3a3f39 of _0x1a0a24['items'])_0x130583[_0x1fa3('0x2e')](_0x3a3f39[_0x1fa3('0x28')])||this['C'](_0x3a3f39);if(this[_0x1fa3('0x8')]['ui']['focusTracker']['isFocused'])for(const _0xd62910 of _0x130583)this['V'](_0x1a0a24[_0x1fa3('0x19')](_0xd62910));}),this[_0x1fa3('0x12')](_0x1a0a24,_0x1fa3('0x34'),(_0x1793a7,_0x151175,_0x3bcff0)=>{_0x3bcff0&&this['editor']['ui'][_0x1fa3('0x25')][_0x1fa3('0x22')]&&this['V'](_0x1a0a24[_0x1fa3('0x19')](_0x3bcff0),!0x0);}),this[_0x1fa3('0x12')](_0x116bdc,_0x1fa3('0x18'),(_0xd13b3f,_0x272328,_0x3b811b,_0x25e93d)=>{_0x25e93d&&this[_0x1fa3('0x10')](_0x25e93d),_0x3b811b&&_0x1a0a24[_0x1fa3('0x5')][_0x1fa3('0x35')](_0x3b811b)&&(this['listenTo'](_0x3b811b,'change:height',()=>_0x116bdc[_0x1fa3('0xb')]()),this[_0x1fa3('0x12')](_0x3b811b,_0x1fa3('0x27'),()=>{this['v'][_0x1fa3('0x24')](_0x3b811b),this['C'](_0x3b811b),this['editor'][_0x1fa3('0x1a')][_0x1fa3('0x17')][_0x1fa3('0x1d')]();}),_0x1a0a24[_0x1fa3('0xc')]!==_0x3b811b[_0x1fa3('0x28')]&&(_0x1a0a24[_0x1fa3('0xc')]=_0x3b811b[_0x1fa3('0x28')]));}),this[_0x1fa3('0x12')](this[_0x1fa3('0x8')]['ui'],_0x1fa3('0x30'),()=>{_0x116bdc[_0x1fa3('0x14')]&&_0x1a0a24[_0x1fa3('0x5')][_0x1fa3('0x35')](_0x116bdc[_0x1fa3('0x14')])&&_0x116bdc[_0x1fa3('0xb')]();}),this[_0x1fa3('0x12')](this['editor'][_0x1fa3('0x1a')][_0x1fa3('0x17')][_0x1fa3('0xd')],_0x1fa3('0x13'),()=>{this['v'][_0x1fa3('0x7')](),_0x1a0a24['refresh']();}),this[_0x1fa3('0x1f')]=!0x0;}[_0x1fa3('0xa')](){if(!this['isAttached'])throw new _0x417883(_0x1fa3('0x16'),this);const _0x4771a6=this[_0x1fa3('0x8')][_0x1fa3('0x3')][_0x1fa3('0x32')](_0x1fa3('0x29')),_0xb1fa4=this['A'];for(const _0x363c25 of this['I'])this['C'](_0x363c25);this[_0x1fa3('0x10')](_0x4771a6[_0x1fa3('0x5')]),this[_0x1fa3('0x10')](_0x4771a6),this[_0x1fa3('0x10')](_0xb1fa4),this[_0x1fa3('0x10')](this[_0x1fa3('0x8')]['ui']),this[_0x1fa3('0x10')](this['editor']['ui']['focusTracker']),this[_0x1fa3('0x10')](this[_0x1fa3('0x8')]['editing'][_0x1fa3('0x17')][_0x1fa3('0xd')]),this[_0x1fa3('0x1f')]=!0x1;}['V'](_0xb870e5,_0x11463b){const _0x4a0af1=this['editor']['plugins'][_0x1fa3('0x32')](_0x57855b);this['v']['has'](_0xb870e5)||(this['I']['has'](_0xb870e5)||this['A'][_0x1fa3('0x33')](_0xb870e5)||(this['I'][_0x1fa3('0x24')](_0xb870e5),this['A'][_0x1fa3('0x24')]({'stackId':_0xb870e5['id'],'view':_0xb870e5,'position':{'target':()=>_0x4a0af1[_0x1fa3('0xf')](_0xb870e5[_0x1fa3('0x28')])||_0xb870e5[_0x1fa3('0x1e')]}})),_0x11463b&&this['A'][_0x1fa3('0x2a')](_0xb870e5['id']));}['C'](_0x1a849c){this['I'][_0x1fa3('0x35')](_0x1a849c)&&this['A'][_0x1fa3('0x33')](_0x1a849c)&&(this['I'][_0x1fa3('0x9')](_0x1a849c),this['A']['remove'](_0x1a849c));}}