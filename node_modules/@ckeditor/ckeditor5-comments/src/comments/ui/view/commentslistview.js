/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x4760=['listenTo','editorConfig','from','collapse','createCollection','change:isActive','get','delegate','some','setTemplate','removeComment','destroy','visibleViews','remove','locale','bind','equal','expand','focus','refreshVisibleViews','comments','viewUid','maxThreadTotalWeight','change:isEditMode','isEditMode','length','commentUpdated','add','change:hasDirtyComment','ck-thread__comments','commentViews','formatDateTime','_collapsedCommentsView','_model','hasDirtyComment','_config','render','updateComment','count','isActive','stopListening','maxCommentCharsWhenCollapsed','insert','set'];(function(_0x2a4817,_0x4760a2){const _0x5bb601=function(_0x3d6047){while(--_0x3d6047){_0x2a4817['push'](_0x2a4817['shift']());}};_0x5bb601(++_0x4760a2);}(_0x4760,0x6f));const _0x5bb6=function(_0x2a4817,_0x4760a2){_0x2a4817=_0x2a4817-0x0;let _0x5bb601=_0x4760[_0x2a4817];return _0x5bb601;};import _0x2cfef5 from'@ckeditor/ckeditor5-ui/src/view';import _0x44676d from'@ckeditor/ckeditor5-utils/src/diff';import _0x27e1be from'./collapsedcommentsview';import _0x5d180 from'@ckeditor/ckeditor5-utils/src/collection';export default class vt extends _0x2cfef5{constructor(_0x561858,_0x568eb9,_0x4fe650){super(_0x561858),this[_0x5bb6('0x14')](_0x5bb6('0xb'),!0x1),this[_0x5bb6('0x14')](_0x5bb6('0x2'),_0x568eb9['comments']['length']),this[_0x5bb6('0x14')](_0x5bb6('0x10'),!0x1),this[_0x5bb6('0xa')]=_0x568eb9,this[_0x5bb6('0xc')]=_0x4fe650,this[_0x5bb6('0x7')]=this['createCollection'](),this[_0x5bb6('0x21')]=this[_0x5bb6('0x19')](),this[_0x5bb6('0x9')]=new _0x27e1be(_0x561858),this[_0x5bb6('0x9')][_0x5bb6('0x24')](_0x5bb6('0xf'))['to'](this,_0x5bb6('0x2'),_0x108895=>_0x108895-this[_0x5bb6('0xc')]['maxCommentsWhenCollapsed']);for(const _0xbf1f87 of _0x568eb9[_0x5bb6('0x29')])this['Ct'](_0xbf1f87);this['listenTo'](_0x568eb9['comments'],_0x5bb6('0x4'),(_0x5999b8,_0x1b8dd8)=>{this[_0x5bb6('0x2')]++,this['Ct'](_0x1b8dd8),this['refreshVisibleViews']();}),this[_0x5bb6('0x15')](_0x568eb9['comments'],_0x5bb6('0x22'),(_0x8fcbc2,_0x51f959)=>{this['length']--,this['gt'](_0x51f959),this[_0x5bb6('0x28')]();}),this[_0x5bb6('0x15')](_0x568eb9,_0x5bb6('0x3'),()=>this[_0x5bb6('0x28')]()),this['on'](_0x5bb6('0x1a'),()=>this['refreshVisibleViews']()),this['on'](_0x5bb6('0x5'),()=>this[_0x5bb6('0x28')]()),this[_0x5bb6('0x1e')]({'tag':'ul','attributes':{'class':[_0x5bb6('0x6')]},'children':this['visibleViews']});}get['yt'](){return this[_0x5bb6('0xa')]['weight']>this[_0x5bb6('0xc')][_0x5bb6('0x2b')]&&!this['isActive']&&!this['hasDirtyComment'];}['render'](){super[_0x5bb6('0xd')](),this[_0x5bb6('0x28')]();}['focus'](){this['element'][_0x5bb6('0x27')]();}[_0x5bb6('0x20')](){this[_0x5bb6('0x9')][_0x5bb6('0x20')]();for(const _0x2df4ed of this[_0x5bb6('0x7')])_0x2df4ed[_0x5bb6('0x20')]();super['destroy']();}['refreshVisibleViews'](){this['yt']?this['wt']():this['vt']();}['Ct'](_0x9c1c13){const _0x38623a=new this[(_0x5bb6('0xc'))]['CommentView'](this[_0x5bb6('0x23')],_0x9c1c13,{'maxCommentCharsWhenCollapsed':this[_0x5bb6('0xc')][_0x5bb6('0x12')],'formatDateTime':this[_0x5bb6('0xc')][_0x5bb6('0x8')],'editorConfig':this[_0x5bb6('0xc')][_0x5bb6('0x16')]});_0x38623a[_0x5bb6('0x2a')]=_0x9c1c13['id'],_0x38623a['delegate'](_0x5bb6('0x1f'))['to'](this),_0x38623a[_0x5bb6('0x1c')](_0x5bb6('0xe'))['to'](this),this[_0x5bb6('0x15')](_0x38623a,_0x5bb6('0x0'),()=>this['At']()),this['commentViews'][_0x5bb6('0x4')](_0x38623a);}['gt'](_0x39916d){const _0x22f9f8=this[_0x5bb6('0x7')][_0x5bb6('0x22')](_0x39916d['id']);this[_0x5bb6('0x11')](_0x22f9f8),_0x22f9f8[_0x5bb6('0x1')]&&this['At'](),_0x22f9f8[_0x5bb6('0x20')]();}['At'](){this[_0x5bb6('0xb')]=Array[_0x5bb6('0x17')](this['commentViews'])[_0x5bb6('0x1d')](_0x2d4e19=>_0x2d4e19[_0x5bb6('0x1')]);}['wt'](){const _0x29b52a=function(_0x3cd742){const _0x41eb48=new _0x5d180();for(const _0x1572df of _0x3cd742)_0x41eb48[_0x5bb6('0x4')](_0x1572df);return _0x41eb48;}(this['commentViews']),_0x70f95d=this[_0x5bb6('0x9')][_0x5bb6('0xf')];for(let _0x46bb9f=0x1;_0x46bb9f<=_0x70f95d;_0x46bb9f++)_0x29b52a[_0x5bb6('0x22')](0x1);for(const _0x57638b of _0x29b52a)_0x57638b[_0x5bb6('0x18')]();_0x70f95d>0x0&&_0x29b52a[_0x5bb6('0x4')](this['_collapsedCommentsView'],0x1),Dt(_0x44676d(Array[_0x5bb6('0x17')](this[_0x5bb6('0x21')]),Array['from'](_0x29b52a)),this[_0x5bb6('0x21')],_0x29b52a);}['vt'](){Dt(_0x44676d(Array[_0x5bb6('0x17')](this[_0x5bb6('0x21')]),Array[_0x5bb6('0x17')](this[_0x5bb6('0x7')])),this[_0x5bb6('0x21')],this[_0x5bb6('0x7')]);for(const _0x41b158 of this[_0x5bb6('0x21')])_0x41b158[_0x5bb6('0x26')]();}}function Dt(_0x4c98ed,_0x4bd8b8,_0x181a8f){let _0x3d26f6=0x0;for(const _0x50a829 of _0x4c98ed)switch(_0x50a829){case _0x5bb6('0x13'):_0x4bd8b8[_0x5bb6('0x4')](_0x181a8f[_0x5bb6('0x1b')](_0x3d26f6),_0x3d26f6),_0x3d26f6++;break;case'delete':_0x4bd8b8[_0x5bb6('0x22')](_0x3d26f6);break;case _0x5bb6('0x25'):_0x3d26f6++;}}