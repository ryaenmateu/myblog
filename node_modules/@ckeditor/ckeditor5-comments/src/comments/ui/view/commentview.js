/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import tt from'@ckeditor/ckeditor5-utils/src/mix';import _0x2c2c87 from'@ckeditor/ckeditor5-ui/src/button/buttonview';import yt from'./basecommentview';import It from'@ckeditor/ckeditor5-collaboration-core/src/users/view/userview';import Et from'@ckeditor/ckeditor5-core/theme/icons/pencil.svg';import Rt from'../../../../theme/icons/remove-comment.svg';import Tt from'./confirmmixin';export default class Mt extends yt{constructor(_0x4ba787,_0xc5fd28,_0x2f2227){super(_0x4ba787,_0xc5fd28,_0x2f2227);const {t:t}=this['locale'];this['set']('actionIndicator',null),this['set']('placeholder',t('Reply...')),this['set']('createdAt',null),this['bind']('createdAt')['to'](_0xc5fd28),this['editButton']=this['Et'](),this['removeButton']=this['Rt'](),this['userView']=new It(_0x4ba787,_0xc5fd28['author']),this['userView']['extendTemplate']({'attributes':{'class':['ck-comment__user','ck-annotation__user']}}),this['listenTo'](_0xc5fd28,'change:isRemovable',()=>this['cancelConfirm']()),this['setTemplate'](this['_getTemplate']());}['_getTemplate'](){const _0x343965=this['bindTemplate'];return{'tag':'li','attributes':{'class':['ck-comment__wrapper',_0x343965['if']('isConfirm','ck-comment--remove-confirmation')],'tabindex':-0x1},'children':[{'tag':'div','attributes':{'class':['ck-comment','ck-annotation',_0x343965['if']('isEditMode','ck-comment--edit'),_0x343965['to']('actionIndicator',_0x7e3de9=>_0x7e3de9?'ck-comment--'+_0x7e3de9:'')],'data-author-id':this['_model']['author']['id'],'data-comment-id':this['_model']['id']},'children':[this['userView'],{'tag':'div','attributes':{'class':['ck-comment__main','ck-annotation__main']},'children':[{'tag':'div','attributes':{'class':['ck-comment__info','ck-annotation__info']},'children':[{'tag':'span','children':[{'text':this['userView']['name']}],'attributes':{'class':['ck-comment__info-name','ck-annotation__info-name']}},{'tag':'time','attributes':{'datetime':_0x343965['to']('createdAt'),'class':['ck-comment__info-time','ck-annotation__info-time']},'children':[{'text':_0x343965['to']('createdAt',_0x4301b4=>this['_config']['formatDateTime'](_0x4301b4))}]}]},{'tag':'div','attributes':{'class':['ck-comment__actions','ck-annotation__actions',_0x343965['if']('isEditMode','ck-comment__actions--hidden'),_0x343965['if']('isEditMode','ck-annotation__actions--hidden')]},'children':[this['editButton'],this['removeButton']]},{'tag':'div','attributes':{'class':['ck-annotation__content-wrapper']},'children':this['visibleView']}]}]}]};}['Et'](){const {t:t}=this['locale'],_0x14d7b9=new _0x2c2c87(this['locale']);return _0x14d7b9['label']=t('Edit'),_0x14d7b9['icon']=Et,_0x14d7b9['extendTemplate']({'attributes':{'class':'ck-comment--edit'}}),_0x14d7b9['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x21cb2d=>!_0x21cb2d),_0x14d7b9['bind']('isVisible')['to'](this['_model'],'isEditable'),_0x14d7b9['on']('execute',()=>this['switchToEditMode']()),_0x14d7b9;}['Rt'](){const {t:t}=this['locale'],_0x4d70c3=new _0x2c2c87(this['locale']);return _0x4d70c3['label']=t('Remove'),_0x4d70c3['icon']=Rt,_0x4d70c3['extendTemplate']({'attributes':{'class':'ck-comment--remove'}}),_0x4d70c3['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x43d6e2=>!_0x43d6e2),_0x4d70c3['bind']('isVisible')['to'](this['_model'],'isRemovable'),_0x4d70c3['on']('execute',()=>{this['showConfirm'](t('Delete\x20comment?'),this['element'])['then'](()=>{this['fire']('removeComment',this['_model']['id']);});}),_0x4d70c3;}['Mt'](_0x4e6bf5,_0x47c216){this['listenTo'](_0x4e6bf5,'mouseenter',()=>this['actionIndicator']=_0x47c216),this['listenTo'](_0x4e6bf5,'focus',()=>this['actionIndicator']=_0x47c216),this['listenTo'](_0x4e6bf5,'mouseleave',()=>this['actionIndicator']=null),this['listenTo'](_0x4e6bf5,'blur',()=>this['actionIndicator']=null);}['_createCommentInputView'](){const _0x3161f3=super['_createCommentInputView']();return _0x3161f3['bind']('placeholder')['to'](this),_0x3161f3;}['render'](){super['render'](),this['Mt'](this['editButton']['element'],'edit'),this['Mt'](this['removeButton']['element'],'remove');}}tt(Mt,Tt);