/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x3b6138 from'@ckeditor/ckeditor5-ui/src/view';import lt from'./commentthreadinputview';import vt from'./commentslistview';export default class pt extends _0x3b6138{constructor(_0x540d2c,_0x314cba,_0x5937e5,_0x1ec5a5){super(_0x540d2c),this['set']('isActive',!0x1),this['set']('isDirty',!0x1),this['_model']=_0x314cba,this['_localUser']=_0x5937e5,this['_config']=_0x1ec5a5,this['commentsListView']=new vt(_0x540d2c,_0x314cba,Object['assign']({'CommentView':this['_config']['CommentView']},_0x1ec5a5)),this['commentsListView']['delegate']('removeComment')['to'](this),this['commentsListView']['delegate']('updateComment')['to'](this),this['commentsListView']['bind']('isActive')['to'](this),this['set']('length',this['commentsListView']['length']),this['bind']('length')['to'](this['commentsListView'],'length'),this['commentThreadInputView']=this['lt'](),this['on']('removeComment',()=>this['focus']()),this['bind']('isDirty')['to'](this['commentsListView'],'hasDirtyComment',this['commentThreadInputView']['commentInputView'],'value',(_0x3ae9c4,_0x57e27d)=>_0x3ae9c4||!!_0x57e27d);}['focus'](){this['element']['focus']();}['destroy'](){this['isDirty']=!0x1,this['commentsListView']['destroy'](),this['commentThreadInputView']['destroy'](),super['destroy']();}['lt'](){const {t:t}=this['locale'],_0x1a0906=new lt(this['locale'],this['_localUser'],this['_config']['editorConfig']),_0x1f72fa=_0x1a0906['commentInputView'];return _0x1a0906['bind']('showInput')['to'](this,'isActive',this['_model'],'isReadOnly',_0x1f72fa,'value',(_0x54a6af,_0x31951a,_0x31bebb)=>!!_0x31bebb||_0x54a6af&&!_0x31951a),_0x1f72fa['bind']('placeholder')['to'](this,'length',_0x3c0d14=>t(_0x3c0d14?'Reply...':'Write\x20a\x20comment...')),_0x1f72fa['on']('submit',(_0x1b0ced,_0x1f7238)=>{this['fire']('addComment',_0x1f7238);}),_0x1f72fa['on']('cancel',()=>{this['focus']();}),_0x1f72fa['bind']('disabledSubmit')['to'](this['_model'],'isReadOnly'),_0x1f72fa['on']('cancel',_0x2744d6=>{0x0==this['length']&&(this['fire']('removeCommentThread'),_0x2744d6['stop']());}),this['on']('change:isActive',(_0x52a79e,_0x2f283e,_0x4e7eb6)=>{_0x4e7eb6||this['length']||_0x1f72fa['value']||this['fire']('removeCommentThread');}),_0x1a0906;}}