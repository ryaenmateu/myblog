/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x40bef4 from'@ckeditor/ckeditor5-ui/src/view';import kt from'@ckeditor/ckeditor5-ui/src/viewcollection';import mt from'../commenteditor/commenteditor';import _0x425e98 from'@ckeditor/ckeditor5-ui/src/button/buttonview';import _0x3b6772 from'@ckeditor/ckeditor5-utils/src/focustracker';import bt from'@ckeditor/ckeditor5-ui/src/focuscycler';import _0x2a5e68 from'@ckeditor/ckeditor5-utils/src/keystrokehandler';import gt from'@ckeditor/ckeditor5-core/theme/icons/check.svg';import xt from'@ckeditor/ckeditor5-core/theme/icons/cancel.svg';export default class ft extends _0x40bef4{constructor(_0x4422f0,_0x57d2f9={}){super(_0x4422f0);const {t:t}=_0x4422f0;this['editor']=new mt(_0x57d2f9),this['keystrokes']=new _0x2a5e68(),this['focusTracker']=new _0x3b6772(),this['set']('value',_0x57d2f9['initialData']||''),this['set']('disabledSubmit',!0x1),this['set']('showButtons',!0x0),this['set']('placeholder',t('Reply...')),this['submitButtonView']=this['kt'](),this['cancelButtonView']=this['bt'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-comment__input-actions',this['bindTemplate']['if']('showButtons','ck-comment__input-actions--active')]},'children':[this['submitButtonView'],this['cancelButtonView']]}]}),this['keystrokes']['set']('Esc',(_0x12ac1a,_0x46f96a)=>{this['cancelButtonView']['fire']('execute'),_0x46f96a();}),this['on']('submit',(_0x33a385,_0x2d29fa)=>{_0x2d29fa['length']>0xfa0?(alert(t({'string':'Comment\x20content\x20is\x20too\x20long.\x20Your\x20comment\x20has\x20%0\x20characters\x20but\x20the\x20limit\x20is\x20%1\x20characters.','id':'TOO_LONG_COMMENT_ALERT'},[_0x2d29fa['length'],0xfa0])),_0x33a385['stop']()):this['editor']['setData']('');},{'priority':'high'});}['render'](){super['render']();const {editor:_0x1a4086,element:_0x15e5b4}=this;this['keystrokes']['listenTo'](_0x15e5b4),this['focusTracker']['add'](_0x15e5b4),_0x1a4086['create']()['then'](()=>{_0x15e5b4['insertBefore'](_0x1a4086['ui']['element'],_0x15e5b4['firstChild']),_0x1a4086['model']['document']['on']('change',()=>this['value']=_0x1a4086['getData']()),_0x1a4086['bind']('placeholder')['to'](this),this['ft'](_0x1a4086),this['fire']('editorReady');});}['focus'](){this['editor']['focus']();}['destroy'](){return this['_t']?Promise['resolve']():(this['_t']=!0x0,this['isRendered']?this['editor']['destroy']()['then'](()=>super['destroy']()):Promise['resolve'](super['destroy']()));}['kt'](){const _0x5278e1=new _0x425e98(this['locale']),{t:t}=this['locale'];return _0x5278e1['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--submit']}}),_0x5278e1['label']=t('Submit'),_0x5278e1['icon']=gt,_0x5278e1['on']('execute',()=>{this['fire']('submit',this['value']);}),_0x5278e1['bind']('isEnabled')['to'](this,'value',this,'disabledSubmit',(_0x2a8f2f,_0x10ef88)=>!_0x10ef88&&!!_0x2a8f2f['trim']()),_0x5278e1;}['bt'](){const _0x5118d5=new _0x425e98(this['locale']),{t:t}=this['locale'];return _0x5118d5['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--cancel']}}),_0x5118d5['label']=t('Cancel'),_0x5118d5['icon']=xt,_0x5118d5['on']('execute',()=>{this['editor']['setData'](''),this['fire']('cancel');}),_0x5118d5;}['ft'](_0x28e037){const _0x37a3af=this['focusTracker'],_0x154c91=new kt();[_0x28e037['ui']['view'],this['submitButtonView'],this['cancelButtonView']]['forEach'](_0xfe69e9=>{_0x154c91['add'](_0xfe69e9),_0x37a3af['add'](_0xfe69e9['element']);});const _0xb1e5ec=new bt({'focusables':_0x154c91,'focusTracker':_0x37a3af});this['keystrokes']['set']('tab',(_0x10508e,_0x53b870)=>{_0xb1e5ec['focusNext'](),_0x53b870();},{'priority':'low'}),this['keystrokes']['set']('shift\x20+\x20tab',(_0x5a63b9,_0x595989)=>{_0xb1e5ec['focusPrevious'](),_0x595989();},{'priority':'low'});}}